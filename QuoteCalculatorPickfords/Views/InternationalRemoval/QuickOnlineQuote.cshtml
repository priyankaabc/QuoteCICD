@model QuoteCalculatorPickfords.Models.QuickQuoteItemsModel
@using QuoteCalculatorPickfords.Common
@{
    ViewBag.Title = "Quick Online Quote";
}

<div class="page-breadcrumb text-center font-nr mb-2">
    <ul>
        <li><a href="@Url.Action("Index", "Home")">Home</a></li>
        <li><a href="#">Get a quote</a></li>
        <li><a href="#">Your international move</a></li>
        <li><a href="#">Removal Services selction</a></li>
        <li><a href="#">Quick quote</a></li>
    </ul>
</div>

<h1 class="text-primary text-center mb-4"><b>Quick Online Quote</b></h1>
<p class="mb-2">Anglo Pacific’s Quick Quote is based on property size.</p>
<p class="mb-4">You can book your move here and pay a deposit. However, not all properties are the same size and volumes may vary.</p>
<p class="mb-2">If on move day your volume is determined to be higher than the amount you choose here, there will be additional charges.</p>
<p>Similarly, if it is less we will refund the difference. We therefore recommend having a <b>FREE home survey.</b></p>
<div class="row justify-content-center">
    <div class="col-md-9 my-4">
        <ul class="progress-steps">
            <li class="active disabled">First Step</li>
            <li class="active disabled">Second Step</li>
            <li class="active">Third Step</li>
        </ul>
    </div>
    @using (Html.BeginForm("QuickOnlineQuote", "InternationalRemoval", FormMethod.Post, new { @class = "custom-inputs" }))
    {
        <div class="col-12">
            <div class="border-top border-bottom pt-4">
                <h5 class="text-uppercase text-success"><b>Indicate Property Size</b></h5>
                <span>Please select your property size below to generate a quick quote</span>
                <div class="row mt-5">
                    @if (Model.items.Count > 0)
                    {
                        foreach (var item in Model.items)
                        {
                            <div class="col-auto mb-5">
                                <div class="carton-box property-size text-center d-flex flex-column">
                                    <p class="mb-2"><b>@item.Title</b></p>
                                    <div class="flex-1 my-3 d-flex justify-content-center align-items-center">
                                        <img src="~/Content/@item.image" alt="img" />
                                    </div>
                                    <p class="mb-0 mt-2"><b>@item.Cuft cu ft</b></p>
                                    <p>@item.Ftcontainer container</p>
                                    <button type="button" id="@item.ItemId" class="btn btn-outline-secondary" onclick="SelectItem(@item.ItemId)">Select</button>
                                </div>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>

        <div class="col-12 custom-inputs">
            <div class="my-4">
                <h5><b><span class="text-success">None of the above? Customize it:</span></b></h5>
                <b>Do you know your volume or have you already been quoted a volume? Tell us below</b>
            </div>
            <div class="row">
                @Html.HiddenFor(m => m.QuickQuoteItemId)
                @Html.HiddenFor(m => m.InternationalRemovalId)
                @*<div class="col-md-2 col-sm-4 form-group">
                        @Html.Label("Beds*")
                        @Html.TextBoxFor(m=>m.Beds, new { @class = "form-control", @placeholder = "Type Here" })
                        @Html.ValidationMessageFor(m => m.Beds)
                    </div>*@

                <div class="col-md-2 col-sm-4 form-group">
                    @Html.Label("CU ft")
                    @Html.TextBoxFor(m => m.Cuft, new { @class = "form-control", @placeholder = "Type Here" })
                    @Html.ValidationMessageFor(m => m.Cuft)
                </div>
                @*<div class="col-md-2 col-sm-4 form-group">
                        @Html.Label("ft container*")
                        @Html.TextBoxFor(m => m.Ftcontainer, new { @class = "form-control", @placeholder = "Type Here" })
                        @Html.ValidationMessageFor(m => m.Ftcontainer)
                    </div>*@
            </div>
        </div>

        <div class="col-12">
            <div class="border-top mt-4">
                <h5 class="my-4"><b><span class="text-success">Any special requirements? Let us know:</span></b></h5>
                @Html.TextAreaFor(m => m.SpecialRequirements, 3, 5, new { @class = "form-control", @placeholder = "Your message here (max 200 ch)" })
            </div>
        </div>

        <div class="col-12 mt-5">
            <div class="border-top pt-4">
                <div class="row justify-content-between">
                    <div class="col-sm-auto">
                        @*<button class="btn btn-secondary btn-lg rounded-pill d-flex align-items-center justify-content-center"><span class="pl-2" style="transform: rotate(180deg);">&#x27A1;</span> Back</button>*@
                        <a class="btn btn-secondary btn-lg rounded-pill d-flex align-items-center justify-content-center" href="@Url.Action("RemovalServiceSelection", "InternationalRemoval")"><span class="pl-2" style="transform: rotate(180deg);">&#x27A1;</span> Back</a>
                    </div>

                    <div class="col-sm-auto">
                        <button type="button" onclick="return checkValid()" class="btn btn-warning btn-lg rounded-pill d-flex align-items-center justify-content-center">Next <span class="pl-2">&#x27A1;</span></button>
                    </div>
                </div>
            </div>
        </div>
    }
</div>

<script>
    function SelectItem(id)
    {
        var con = $("#" + id).hasClass("btn-success-600");
        if (!con)
        {
            var ItemId = $("#QuickQuoteItemId").val();
            if (ItemId != 0 && ItemId != id) {
                $("#QuickQuoteItemId").val(id);
                $("#Beds").attr("disabled", "disabled");
                $("#Cuft").attr("disabled", "disabled");
                $("#Ftcontainer").attr("disabled", "disabled");
                $("#" + id).removeClass("btn btn-outline-secondary");
                $("#" + id).addClass("btn btn-success-600 btn-lg d-flex align-items-center legitRipple");
                $("#" + id).html("<i class='bx bx-check font-lg'></i> Selected");
                $("#" + ItemId).removeClass("btn btn-success-600 btn-lg d-flex align-items-center legitRipple");
                $("#" + ItemId).addClass("btn btn-outline-secondary");
                $("#" + ItemId).html("Select");
            }
            else
            {
                $("#QuickQuoteItemId").val(id);
                $("#Beds").attr("disabled", "disabled");
                $("#Cuft").attr("disabled", "disabled");
                $("#Ftcontainer").attr("disabled", "disabled");
                $("#" + id).removeClass("btn btn-outline-secondary");
                $("#" + id).addClass("btn btn-success-600 btn-lg d-flex align-items-center legitRipple");
                $("#" + id).html("<i class='bx bx-check font-lg'></i> Selected");
            }
        }
        else
        {
            $("#" + id).removeClass("btn btn-success-600 btn-lg d-flex align-items-center legitRipple");
            $("#" + id).addClass("btn btn-outline-secondary");
            $("#" + id).html("Select");
            $("#Beds").removeAttr("disabled");
            $("#Cuft").removeAttr("disabled");
            $("#Ftcontainer").removeAttr("disabled");
        }
    }

    function checkValid()
    {
        var SelectedItem = $("#QuickQuoteItemId").val();
        if (SelectedItem == null || SelectedItem == "0") {
            //var Beds = $("#Beds").val();
            var Cuft = $("#Cuft").val();
            //var Ftcontainer = $("#Ftcontainer").val();
            //if (Beds == null || Beds == "") {
            //    ShowErrorMessage("Please Fill Bed");
            //    return false;
            //}
            if (Cuft == null || Cuft == "") {
                ShowErrorMessage("Please Fill Cuft");
                return false;
            }
            //else if (Ftcontainer == null || Ftcontainer == "") {
            //    ShowErrorMessage("Please Fill Ft Container");
            //    return false;
            //}
            else {
                submitData();
            }
        }
        else {
            submitData();
        }
    }

    function submitData()
    {
        var url = '@Url.Action("QuickOnlineQuote", "InternationalRemoval")';
        var paramValue = $('form').serialize(); 
        callwebservice(url, paramValue, submitCompleted, false, datatypeEnum.text, typeEnum.post);
    }

    function submitCompleted(returString) {
        if (returString != null) {
            if (returString !== "") {
                showMessageOnly(returString, 'popup-error');
            }
            else {
                SucessMessage("Saved Successfully ");
                window.location.href = '@Url.Action("QuickOnlineQuoteDetail", "InternationalRemoval")';
            }
        }
    }
   
</script>